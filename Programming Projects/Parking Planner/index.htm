<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Parking Form with Visualization</title>
  <style>
    .parking-row {
      display: flex;
      margin-bottom: 10px;
    }
    .parking-space {
      width: 40px;
      height: 40px;
      border: 1px solid #000;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 5px;
    }
    .unblocked {
      border: 2px dashed red;
    }
  </style>
  <script>
    function generateRows() {
      const rowContainer = document.getElementById('rowContainer');
      rowContainer.innerHTML = ''; // Clear existing rows
      const numRows = parseInt(document.getElementById('numRows').value) || 0;

      for (let i = 1; i <= numRows; i++) {
        const rowDiv = document.createElement('div');
        rowDiv.innerHTML = `
          <label>How many spaces in row ${i}?</label>
          <input type="number" name="spacesInRow${i}" min="0"><br>
        `;
        rowContainer.appendChild(rowDiv);
      }
    }

    function toggleUnblockedParking() {
      const isUnblocked = document.querySelector('input[name="unblocked"]:checked')?.value === 'yes';
      const unblockedContainer = document.getElementById('unblockedContainer');
      unblockedContainer.style.display = isUnblocked ? 'block' : 'none';
    }

    function generateCars() {
      const carContainer = document.getElementById('carContainer');
      carContainer.innerHTML = ''; // Clear existing cars
      const numCars = parseInt(document.getElementById('numCars').value) || 0;
      const times = Array.from({ length: 48 }, (_, i) => {
        const hour = Math.floor(i / 2);
        const minute = i % 2 === 0 ? '00' : '30';
        const period = hour < 12 ? 'AM' : 'PM';
        return `${hour % 12 === 0 ? 12 : hour % 12}:${minute} ${period}`;
      });

      for (let i = 1; i <= numCars; i++) {
        const carDiv = document.createElement('div');
        carDiv.innerHTML = `
          <h4>Car ${i}</h4>
          <label>Create a nickname for car ${i}:</label>
          <input type="text" name="nicknameCar${i}"><br>
          ${['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].map(day => `
            <label>What time does car ${i} have to leave on ${day}?</label>
            <select name="car${i}_${day.toLowerCase()}">
              ${times.map(time => `<option value="${time}">${time}</option>`).join('')}
            </select><br>
          `).join('')}
        `;
        carContainer.appendChild(carDiv);
      }
    }

    function processForm(event) {
      event.preventDefault();
      // Logic for processing and visualization goes here
    }
  </script>
</head>
<body>
  <form onsubmit="processForm(event)">
    <h2>Parking Form</h2>
    <label>How many rows of parking?</label>
    <input type="number" id="numRows" name="numRows" min="0" oninput="generateRows()"><br>

    <div id="rowContainer"></div>

    <label>Is there any unblocked parking?</label>
    <input type="radio" name="unblocked" value="yes" onclick="toggleUnblockedParking()"> Yes
    <input type="radio" name="unblocked" value="no" onclick="toggleUnblockedParking()"> No<br>

    <div id="unblockedContainer" style="display:none;">
      <label>How many spaces of unblocked parking?</label>
      <input type="number" name="unblockedSpaces" min="0"><br>
    </div>

    <label>How many cars will be parked?</label>
    <input type="number" id="numCars" name="numCars" min="0" oninput="generateCars()"><br>

    <div id="carContainer"></div>

    <button type="submit">Submit</button>
  </form>

  <div id="visualization"></div>
</body>
</html>
