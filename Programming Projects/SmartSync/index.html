<html>
    <head>
        <title>SmartSync</title>
        <link rel="icon" href="https://brysonnoble.github.io/Images/Bryson%20Noble%20logo.png">
        <link rel="stylesheet" href="styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Geologica:wght@600&display=swap" rel="stylesheet">
        <script src="sync.js" type="text/javascript"></script>
        <script src="https://brysonnoble.github.io/Programming%20Projects/StudentSpeak/visibility.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="musicSelectContainer">
            <div id="header">
                <div id="headerTextContainer">
                    <h1>SmartSync</h1>
                </div>
            </div>
            <div id="musicContainer">
                <div id="song" onclick="PlaySample(0);">
                    <h3>I don't wanna wait<br><br><span id="artist">David Guetta, OneRepublic</span></h3>
                </div>
                <div id="song" onclick="PlaySample(1);">
                    <h3>i like the way you kiss me<br><br><span id="artist">Artemas</span></h3>
                </div>
                <div id="song" onclick="PlaySample(2);">
                    <h3>Slow It Down<br><br><span id="artist">Benson Boone</span></h3>
                </div>
            </div>
            <div id="footer">
                <div id="track">
                    <div id="playhead"></div>                  
                </div>
                <div id="info" onclick="toggleVis()">
                    <p><u>How does it work?</u></p>
                </div>
            </div>
        </div>
        <div id="explanationWindow">
            <div id="content">
                <h2>The Explanation</h2>
                <p>This tool is used to sync audio over unlimited range. By getting the number of miliseconds from the UNIX epoch and dividing it by the duration of an audio object, we can set the <i>currentTime</i> of the audio to the remainder and it will play perfectly in sync across any device, as long as the time on the device is accurate. Under ideal conditions, the audio will sync to within 1ms. More accurate syncing is not possible due to the limitations of JavaScript's <i>duration</i> property. <a href="https://github.com/brysonnoble/SmartSync">View this project's repository here.</a></p>
                <h2>The Code</h2>
                <div id="code">
                    <pre>
function PlaySample (file) {  
  const audio0 = new Audio('https://brysonnoble.github.io/Programming%20Projects/SmartSync/Sample_Audio/a0.mp3');
  const audio1 = new Audio('https://brysonnoble.github.io/Programming%20Projects/SmartSync/Sample_Audio/a1.mp3');
  const audio2 = new Audio('https://brysonnoble.github.io/Programming%20Projects/SmartSync/Sample_Audio/a2.mp3');

  switch (file) {
    case 0:
      audio0.addEventListener('loadedmetadata', () => {
        let playheadTimeInMs = PlayheadPos(audio0.duration * 1000);
        audio0.currentTime = playheadTimeInMs / 1000;
        audio0.play();
      });
      break;
    case 1:
      audio1.addEventListener('loadedmetadata', () => {
        let playheadTimeInMs = PlayheadPos(audio1.duration * 1000);
        audio1.currentTime = playheadTimeInMs / 1000;
        audio1.play();
      });
      break;
    case 2:
      audio2.addEventListener('loadedmetadata', () => {
        let playheadTimeInMs = PlayheadPos(audio2.duration * 1000);
        audio2.currentTime = playheadTimeInMs / 1000;
        audio2.play();
      });
      break;
    default:
      break;
  }
}

function PlayheadPos (audioLen) {
  return Date.now() % audioLen;
}
                </pre>
            </div>
            <div onclick="toggleVis()">
                <center><p><u>Go Back</u></p></center>
            </div>
        </div>
    </body>
</html>
